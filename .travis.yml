env:
  global:
  - CC_TEST_REPORTER_ID=87b67e9610702652e76b79e0c0d65b9d5e940165fb7b1621efaff1c79eb45dcb
language: ruby
rvm:
- 2.5.0
before_script:
- curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64
  > ./cc-test-reporter
- chmod +x ./cc-test-reporter
- "./cc-test-reporter before-build"
script:
- bundle install --jobs=3 --retry=3
- bin/rails db:create
- bin/rails db:migrate
- bundle exec rspec
- bundle exec rubocop
after_script:
- "./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT"
deploy:
  provider: heroku
  api_key:
    secure: zM3Mm6Cv7qES1ZkzZG0xVMHLWv1cLwNEtt8q97+mlfBtNZn3v8Guuhyg+A9HSFITDYiJccKdBtPH9E+Xs2Nde3DG5Oe5zYr/iVA8EaXz9UllEzi3Tb1czp59Y0Q3oJIQgTwsoa9h6SLKZsCNxOb5m+A76AO2WT0Ine/bI4q9QbDlg4M9cqJABwILy/Av9z9yOf9K1CuPCN4JLp+/K2yqTm9F2l0hYgLPv3R4GGcfJ+P0hbHzEjUhSdNOgLl3oEUOZ1q2dSPn1NUeM2v8V+Oezrr31xu29H6t1m79ptZmqSGdrNyim5IoHPimkVej8uQPWtmG0PESLgYlsfXW8L9nGU9oCuPgYZR6Ev2qn39lQnQ5c+OS6BPfEQvSjv6oCMwyZuD1iNCjowX4o2AT9mnYVVb7N8uMc0ck3wvCJuEpjBBVPxLjib/6geG/nfMhLthonwny0fxeva5nSgZEfML18BEfMdkurCBcBrPyhjJ9TYPvCzVi/JKh/UL9MIctNXYkWTXNZkXs6fOgMJpVOlG2nJ1fA05J6wt7yspku0sKYtDrMrYmokZveSekm74t3NRxqRi8zORIb7C/vekvERBqL812fiN6zRwOrEKVPWrGMEXSRuI7h18lmcuv8n25Bo8CDa0l3Rq8d+Ubdw1X9QQKE0hEI70jvla06eYXi+FLTlw=
  app: acebook-team-rocket
  on:
    repo: Sindex42/acebook-team-rocket
  run: rake db:migrate
