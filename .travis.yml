env:
  global:
  - CC_TEST_REPORTER_ID=87b67e9610702652e76b79e0c0d65b9d5e940165fb7b1621efaff1c79eb45dcb
language: ruby
rvm:
- 2.5.0
before_script:
- curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64
  > ./cc-test-reporter
- chmod +x ./cc-test-reporter
- "./cc-test-reporter before-build"
script:
- bundle install --jobs=3 --retry=3
- bin/rails db:create
- bin/rails db:migrate
- bundle exec rspec
- bundle exec rubocop
after_script:
- "./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT"
deploy:
  provider: heroku
  api_key:
    secure: myoCjuwuT13HgW//t0+kjLOawnb4cLVKlSc81yOddrxZfpXMOrUbngOb4RMzpRT/6vlC30/np9wwQCspZh/jKW/R1UlOREsR8kBigvH6Mh3NV+dm/soDQMJHLQv4/wSK7XKYVY89vkEICnph3gxiNfrhpc0wYpNbqt8aCdKG3AKUiccV7RXZnyMRmO4QBjWn02b5cf8Bk3YrQpltJraNRPsxTOVUOU8R/iFUzm3kgVBbohqwlODPhnUgB3yFxCzj3IWTCSU1MIHJOS6YvhU/YEQbGfqqDe4dZQJwUH4Fp+BkHyGjRAADkL6ttK5V63w1biISLoG4mbCexAn8iFCTasloBrNDAHiVpo+7yiGxWJawrQ20ndcZ83PAg5gn8AHV7gUtTdPXj0DIajL1vM1JsQrXZ1kxtbf/xKLka+GuKes2rsUnqg+V8hAV2MDsBf3lw0gE1nPN/UDu1FCCGylEFw1QV89/K59i6MXxIRW2CFf6HXLft/sMhAF/3b+wKQuB/aW56zWoHbmYbAvMRZDF2j8jdk5bk6vb/n1WCrguxjLBaCXU+mcrKHV93eIZ7Rq6aeEHFy8RIq7cvkiqrcBVszoXN1aHCgXgsbaWKkxTJvv6aNkcfB0CrznW4iXwKnMIIWyR+JAQHZtcud1llt0fCrdv/J9KBGcAkLruhh3dCA8=
  app: acebook-team-rocket
  run:
    - "rake db:migrate"
